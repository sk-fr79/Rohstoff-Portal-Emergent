CREATE
OR
REPLACE TRIGGER #TRIGGERNAME#  AFTER
INSERT OR UPDATE OR DELETE 

OF #FIELDNAME#

ON #TABLENAME# FOR EACH ROW  WHEN (
    (OLD.#FIELDNAME# != NEW.#FIELDNAME#)  OR  
    (OLD.#FIELDNAME# IS NULL  AND NEW.#FIELDNAME# IS NOT NULL) OR  
    (OLD.#FIELDNAME# IS NOT NULL  AND NEW.#FIELDNAME# IS NULL)
)



DECLARE
ID_MANDANT_ACTUAL  #TABLENAME#.ID_MANDANT%TYPE;
    
BEGIN

SELECT SYS_CONTEXT(PD_PACKAGE.GET_CONTEXT_NAME, 'ID_MANDANT') INTO ID_MANDANT_ACTUAL FROM DUAL;

IF (ID_MANDANT_ACTUAL = #ID_MANDANT# ) THEN

IF INSERTING THEN


INSERT
INTO
    JT_TRIGGER_ACTION_LOG
    (
      ID_TRIGGER_ACTION_LOG
	  ,ID_MANDANT
      ,LETZTE_AENDERUNG
      ,ERZEUGT_AM
      ,TABLE_BASENAME
      ,TABLE_ID
      ,DB_ACTION_TYP
      ,FIELD_NAME
      ,VAL_BEFORE
      ,VAL_AFTER
      ,USER_ID
      ,ID_TRIGGER_ACTION_DEF
    )
    VALUES
    (
      SEQ_TRIGGER_ACTION_LOG.NEXTVAL
	  ,SYS_CONTEXT(PD_PACKAGE.GET_CONTEXT_NAME, 'ID_MANDANT')
      ,SYSDATE
      ,SYSDATE
      ,'#TABLEBASENAME#'
      ,:NEW.ID_#TABLEBASENAME#
      ,'INSERT'
      ,'#FIELDNAME#'
      ,:OLD.#FIELDNAME#
      ,:NEW.#FIELDNAME#
      ,SYS_CONTEXT(PD_PACKAGE.GET_CONTEXT_NAME, 'ID_USER')
      ,#ID_TRIGGER_ACTION_DEF#
    
    );

ELSIF UPDATING THEN
  
INSERT
INTO
    JT_TRIGGER_ACTION_LOG
    (
      ID_TRIGGER_ACTION_LOG
	  ,ID_MANDANT
      ,LETZTE_AENDERUNG
      ,ERZEUGT_AM
      ,TABLE_BASENAME
      ,TABLE_ID
      ,DB_ACTION_TYP
      ,FIELD_NAME
      ,VAL_BEFORE
      ,VAL_AFTER
      ,USER_ID
      ,ID_TRIGGER_ACTION_DEF
    )
    VALUES
    (
      SEQ_TRIGGER_ACTION_LOG.NEXTVAL
	  ,SYS_CONTEXT(PD_PACKAGE.GET_CONTEXT_NAME, 'ID_MANDANT')
      ,SYSDATE
      ,SYSDATE
      ,'#TABLEBASENAME#'
      ,:NEW.ID_#TABLEBASENAME#
      ,'UPDATE'
      ,'#FIELDNAME#'
      ,:OLD.#FIELDNAME#
      ,:NEW.#FIELDNAME#
      ,SYS_CONTEXT(PD_PACKAGE.GET_CONTEXT_NAME, 'ID_USER')
      ,#ID_TRIGGER_ACTION_DEF#
    
    );


ELSIF DELETING THEN

INSERT
INTO
    JT_TRIGGER_ACTION_LOG
    (
      ID_TRIGGER_ACTION_LOG
	  ,ID_MANDANT
      ,LETZTE_AENDERUNG
      ,ERZEUGT_AM
      ,TABLE_BASENAME
      ,TABLE_ID
      ,DB_ACTION_TYP
      ,FIELD_NAME
      ,VAL_BEFORE
      ,VAL_AFTER
      ,USER_ID
      ,ID_TRIGGER_ACTION_DEF
    )
    VALUES
    (
      SEQ_TRIGGER_ACTION_LOG.NEXTVAL
	  ,SYS_CONTEXT(PD_PACKAGE.GET_CONTEXT_NAME, 'ID_MANDANT')
      ,SYSDATE
      ,SYSDATE
      ,'#TABLEBASENAME#'
      ,:NEW.ID_#TABLEBASENAME#
      ,'DELETE'
      ,'#FIELDNAME#'
      ,:OLD.#FIELDNAME#
      ,:NEW.#FIELDNAME#
      ,SYS_CONTEXT(PD_PACKAGE.GET_CONTEXT_NAME, 'ID_USER')
      ,#ID_TRIGGER_ACTION_DEF#
    
    );



END IF;
   
    
END IF;
    
END;